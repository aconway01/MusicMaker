<!DOCTYPE html>

<html>

<head>

<title>Song Key</title>

<link rel="stylesheet" type="text/css" href="music.css">

<meta charset="UTF-8">

<script>
function songKey() {

    var major_minor = document.getElementById("majorMinor").value;

    var chrom_scale = ["C","C# or Db","D","D# or Eb","E","F","F# or Gb","G","G# or Ab","A","A# or Bb","B"];

    var start_key = document.getElementById("startKey").value;

    var key_index = chrom_scale.indexOf(start_key);

    document.getElementById("myStart").innerHTML = "Your song key is " + start_key + " " + major_minor;

    var end_key = [];

    var chords_in_key;

    if (major_minor == "Major") {
        var major_scale_steps = [key_index, key_index + 2, key_index + 4, key_index + 5, key_index + 7, key_index + 9, key_index + 11, key_index + 12];

        for (i = 0; i < major_scale_steps.length - 1; i++) {
            end_key.push(chrom_scale[major_scale_steps[i]%12]);
        }

        chords_in_key = (end_key[0] + " Major" + "<br>" + end_key[1] + " Minor" + "<br>" + end_key[2] + " Minor" + "<br>" + end_key[3] + " Major" + "<br>" + end_key[4] + " Major" + "<br>" + end_key[5] + " Minor" + "<br>" + end_key[6] + " Diminished");

    }

    else if (major_minor == "Minor") {
        var minor_scale_steps = [chrom_scale.indexOf(start_key), chrom_scale.indexOf(start_key)+ 2, chrom_scale.indexOf(start_key) + 3, chrom_scale.indexOf(start_key) + 5, chrom_scale.indexOf(start_key) + 7, chrom_scale.indexOf(start_key) + 8, chrom_scale.indexOf(start_key) + 10, chrom_scale.indexOf(start_key) + 12];

        for (i = 0; i < minor_scale_steps.length - 1; i++) {
            end_key.push(chrom_scale[minor_scale_steps[i]%12]);
        }

        chords_in_key = (end_key[0] + " Minor" + "<br>" + end_key[1] + " Diminished" + "<br>" + end_key[2] + " Major" + "<br>" + end_key[3] + " Minor" + "<br>" + end_key[4] + " Minor" + "<br>" + end_key[5] + " Major" + "<br>" + end_key[6] + " Major");
        document.getElementById("chords").innerHTML = "The chords in this key are: " + "<br>" + chords_in_key;
    }

    document.getElementById("text_before_scale").innerHTML = "The notes in the " + start_key + " " + major_minor + " scale are: ";

    var scale = "";

    for (i = 0; i < end_key.length; i++) {
        if (i != end_key.length - 1) {
            scale += end_key[i] + ", ";
        }
        else {
            scale += end_key[i];
        }
    }

    document.getElementById("Scale").innerHTML = scale;
    document.getElementById("chords").innerHTML = "The chords in this key are: " + "<br>" + chords_in_key;
}

</script>

</head>

<body>

<div class="contain">

<h1>Music Maker</h1>

<div id='cssmenu'>
<ul>
<li><a href="home.html"><span>Home</span></a></li>
<li class="active"><a href="SongKey.html"><span>Song Keys</span></a></li>
<li><a href="ChordConstructor.html"><span>Chords</span></a></li>
<li class="last"><a href="metronome.html"><span>Metronome</span></a></li>
</ul>

<br>

<p>Enter song key (b's are flats, #'s are sharps):</p>

<select id="startKey">
  <option value="C">C</option>
  <option value="C# or Db">C# or Db</option>
  <option value="D">D</option>
  <option value="D# or Eb">D# or Eb</option>
  <option value="E">E</option>
  <option value="F">F</option>
  <option value="F# or Gb">F# or Gb</option>
  <option value="G">G</option>
  <option value="G# or Ab">G# or Ab</option>
  <option value="A">A</option>
  <option value="A# or Bb">A# or Bb</option>
  <option value="B">B</option>
</select>

<select id="majorMinor">
  <option value="Major">Major</option>
  <option value="Minor">Minor</option>
</select>

<input type="button" value="Try!" onclick="songKey()">

<p id="myStart"></p>
<p id="text_before_scale"></p>
<p id="Scale"></p>
<p id="chords"></p>

</div>

</div>

</body>

</html>
