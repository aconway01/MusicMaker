<!DOCTYPE html>

<html>

<head>

<title>Song Key</title>

<link rel="stylesheet" type="text/css" href="music.css">

<meta charset="UTF-8">

<script>
function MajorMinor() {
    var major_minor = document.getElementById("majorMinor").value;
    if (major_minor == "Minor") {
        songKeyminor();
    }
    else if (major_minor == "Major") {
        songKey();
    }
}

function songKey() {
    var chrom_scale = ["C","C# or Db","D","D# or Eb","E","F","F# or Gb","G","G# or Ab","A","A# or Bb","B"];

    var start_key = document.getElementById("startKey").value;
    
    var key_index = chrom_scale.indexOf(start_key);

    document.getElementById("myStart").innerHTML = "Your song key is " + start_key + " Major";
    
    var major_scale_steps = [chrom_scale.indexOf(start_key), chrom_scale.indexOf(start_key) + 2, chrom_scale.indexOf(start_key)+ 4, chrom_scale.indexOf(start_key)+ 5, chrom_scale.indexOf(start_key) + 7, chrom_scale.indexOf(start_key) + 9, chrom_scale.indexOf(start_key) + 11, chrom_scale.indexOf(start_key) + 12];
    
    for (i = 0; i < 12; i++) {
        chrom_scale.push(chrom_scale[i]);
    }
        
        
    var counter = 0;
    var end_key_major = [];
    
    for (i = 0; i < 24; i++) {
        if (counter - key_index == 0) {
            end_key_major.push(chrom_scale[counter]);
        }
        else if ((major_scale_steps.indexOf(counter) > -1) && (end_key_major.indexOf(chrom_scale[counter]) < 0)) {
            end_key_major.push(chrom_scale[counter]);
        }
        counter += 1;
    }

    document.getElementById("text_before_scale").innerHTML = "The notes in the " + start_key + " Major scale are: ";

    var major_scale = "";
    for (i = 0; i < end_key_major.length; i++) {
        if (i != end_key_major.length - 1) {
            major_scale += end_key_major[i] + ", ";
        }
        else {
            major_scale += end_key_major[i];
        }
    }

    document.getElementById("Scale").innerHTML = major_scale;

    var chords_in_key = (end_key_major[0] + " Major" + "<br>" + end_key_major[1] + " Minor" + "<br>" + end_key_major[2] + " Minor" + "<br>" + end_key_major[3] + " Major" + "<br>" + end_key_major[4] + " Major" + "<br>" + end_key_major[5] + " Minor" + "<br>" + end_key_major[6] + " Diminished");
    document.getElementById("chords").innerHTML = "The chords in this key are: " + "<br>" + chords_in_key;
}

function songKeyminor() {
    var chrom_scale = ["C","C# or Db","D","D# or Eb","E","F","F# or Gb","G","G# or Ab","A","A# or Bb","B"];

    var start_key = document.getElementById("startKey").value;
    
    var key_index = chrom_scale.indexOf(start_key);

    document.getElementById("myStart").innerHTML = "Your song key is " + start_key + " Minor";
    
    var minor_scale_steps = [chrom_scale.indexOf(start_key), chrom_scale.indexOf(start_key)+ 2, chrom_scale.indexOf(start_key) + 3, chrom_scale.indexOf(start_key) + 5, chrom_scale.indexOf(start_key) + 7, chrom_scale.indexOf(start_key) + 8, chrom_scale.indexOf(start_key) + 10, chrom_scale.indexOf(start_key) + 12];
    
    for (i = 0; i < 12; i++) {
        chrom_scale.push(chrom_scale[i]);
    }
    
    counter = 0;
    var end_key_minor = [];
    
    for (i = 0; i < 36; i++) {
        if (counter - key_index == 0) {
            end_key_minor.push(chrom_scale[counter]);
        }
        else if ((minor_scale_steps.indexOf(counter) > -1) && (end_key_minor.indexOf(chrom_scale[counter]) < 0)) {
            end_key_minor.push(chrom_scale[counter]);
        }
        counter += 1;
    }

    document.getElementById("text_before_scale").innerHTML = "The notes in the " + start_key + " Minor scale are: ";

    var minor_scale = "";
    for (i = 0; i < end_key_minor.length; i++) {
        if (i != end_key_minor.length - 1) {
            minor_scale += end_key_minor[i] + ", ";
        }
        else {
            minor_scale += end_key_minor[i];
        }
    }

    document.getElementById("Scale").innerHTML = minor_scale;

    var chords_in_key = (end_key_minor[0] + " Minor" + "<br>" + end_key_minor[1] + " Diminished" + "<br>" + end_key_minor[2] + " Major" + "<br>" + end_key_minor[3] + " Minor" + "<br>" + end_key_minor[4] + " Minor" + "<br>" + end_key_minor[5] + " Major" + "<br>" + end_key_minor[6] + " Major");
    document.getElementById("chords").innerHTML = "The chords in this key are: " + "<br>" + chords_in_key;
}

</script>

</head>

<body>

<div class="contain">

<h1>Music Maker</h1>

<div id='cssmenu'>
<ul>
<li><a href="home.html"><span>Home</span></a></li>
<li class="active"><a href="SongKey.html"><span>Song Keys</span></a></li>
<li><a href="ChordConstructor.html"><span>Chords</span></a></li>
<li class="last"><a href="metronome.html"><span>Metronome</span></a></li>
</ul>

<br>

<p>Enter song key (b's are flats, #'s are sharps):</p>

<select id="startKey">
  <option value="C">C</option>
  <option value="C# or Db">C# or Db</option>
  <option value="D">D</option>
  <option value="D# or Eb">D# or Eb</option>
  <option value="E">E</option>
  <option value="F">F</option>
  <option value="F# or Gb">F# or Gb</option>
  <option value="G">G</option>
  <option value="G# or Ab">G# or Ab</option>
  <option value="A">A</option>
  <option value="A# or Bb">A# or Bb</option>
  <option value="B">B</option>
</select>

<select id="majorMinor">
  <option value="Major">Major</option>
  <option value="Minor">Minor</option>
</select>

<input type="button" value="Try!" onclick="MajorMinor()">

<p id="myStart"></p>
<p id="text_before_scale"></p>
<p id="Scale"></p>
<p id="chords"></p>

</div>

</div>

</body>

</html>